<html lang="en">
<head>
	<title>Violin Phase</title>
	
	<style> 
		body{
			margin: 0;
			background-color: black;
		}

		#footer{
			position: fixed;
			width: 100%;
		    height: 50px;
			margin-top: calc(100vh - 50px);
		/*	border-top: rgba(255,255,255,0.5) solid 0.5px;*/
		}

		#fcontainer1{
			float: left;
			width: calc(25vw);
		    height: 50px;
		    background: linear-gradient(to top, rgba(255,255,255,1) 70%, rgba(255,255,255,0));
		    text-decoration: underline;
		}

		#fcontainer1:hover{
		    background: linear-gradient(to top, rgba(255,192,203,1) 70%, rgba(255,192,203,0));
		}

		#fcontainer2{
			float: left;
			width: calc(25vw);
		    height: 50px;
		    background: linear-gradient(to top, rgba(255,255,255,1) 70%, rgba(255,255,255,0));
		    text-decoration: underline;
		}

		#fcontainer2:hover{
		    background: linear-gradient(to top, rgba(255,192,203,1) 70%, rgba(255,192,203,0));
		}

		#fcontainer3{
			float: left;
			width: calc(25vw);
		    height: 50px;
		    background: linear-gradient(to top, rgba(255,255,255,1) 70%, rgba(255,255,255,0));
		    text-decoration: underline;
		}

		#fcontainer3:hover{
		    background: linear-gradient(to top, rgba(255,192,203,1) 70%, rgba(255,192,203,0));
			padding-top: 22px;
			text-align: center;
		}

		#fcontainer4{
			float: left;
			width: calc(25vw);
		    height: 50px;
		    background: linear-gradient(to top, rgba(255,255,255,1) 70%, rgba(255,255,255,0));
		    text-decoration: underline;
		}

		#fcontainer4:hover{
		    background: linear-gradient(to top, rgba(255,192,203,1) 70%, rgba(255,192,203,0));
		}

		a:visited {
			color: white;
		}

		a {
			color: white;
			text-decoration: none;
		}

		a:hover {
			color: white;
			text-decoration: underline;
		}

		#tracktime{
			position: fixed;
			font: 16px courier, monospace;
			color: white;
			margin-left: 10px;
			margin-top: calc(100vh - 71px);
		}

		#dancetitle{
			position: fixed;
			font: 16px courier, monospace;
			margin-left: calc(100vw - 410px);
			margin-top: 10px;	
			color: white;	
			z-index: 10;
		}

		.title{
			font: 16px courier, monospace;
			padding-top: 22px;
			text-align: center;
		}


		#audioplayer{
			position: fixed;
		    width: 100%;
		    height: 30px;
		    margin-top: -3px;
		  	border: none;
		  	background-color: rgba(0,0,0,0);
		}

		#pButton{
			position: fixed;
			margin-top: 10px; 
			margin-left: 4px;
		    height:30px; 
		    width: 30px;
		    border: none;
		    background-size: 70% 70%;
		    background-repeat: no-repeat;
		    background-position: center;
		    outline:none;
		}

		.play{background: url("play_w.svg") ;}
		.pause{background: url("pause_w.svg");}

		#timeline{
		    width: calc(100vw);
		    height: 100vh;
		    margin-top: -25px;
		    background: rgba(0,0,0,0);
		    z-index: -900;
  
		}
		#playhead{
		    width: 1px;
		    height: 100vh;
		    margin-top: 0px;
		    background: rgba(255, 255, 255,1);
		}


		audio { 
/*		display:none;
*/		}

		video {
			position: fixed;
			z-index: -100;
			object-fit: fill;
		}


		#canvas {
			position: fixed;
			margin-top: 50px;
			margin-left: 30%;
		}

		.view1 {
			position: fixed;
			z-index: -100;
			object-fit: fill;
			transform: none;
		}

		.view2 {
			position: fixed;
			z-index: -100;
			object-fit: fill;
			transform: rotate(90deg) scale(.25);
		}

		.view3 {
			position: fixed;
			z-index: -100;f
			object-fit: fill;
			transform: scale(4) translate(0, -40vh);
		}

		.view4 {
			position: fixed;
			z-index: -100;
			object-fit: fill;
			transform: perspective(400px) rotateX(60deg) translate(0, -20vh);
		}

		#still {
			position:fixed;
			z-index: -10;
			min-width: 100vw;
			min-height: 100vh;
			transform-origin: 0% 0%;
			display: none;
		}

		@media only screen and (max-width: 500px) {
    	#video {display: block;}
    	#still {display: none;}
    	#tracktime {display: none;}
    	#audioplayer {display: none;}
    	#footer {display: none;}
}

	</style>
</head>

<body>
	
<!-- <audio id="video" src="ViolinPhase.mp3" preload="true" autoplay ontimeupdate="document.getElementById('tracktime').innerHTML = Math.floor(this.currentTime) + ' / ' + Math.floor(this.duration);">
  <source src="ViolinPhase.mp3">
</audio> -->

<video id="video" src="dancediagram_blur.mov" preload="true" width = "100%" height = "100%" autoplay ontimeupdate="document.getElementById('tracktime').innerHTML = Math.floor(this.currentTime) + ' / ' + Math.floor(this.duration);">
</video>

<img id="still" src= "atdk_01.jpg" >

<div id="tracktime">0 / 407</div>

<div id="dancetitle"><a href="http://www.rosas.be/en/" target="_blank">Anne Teresa de Keersmaeker</a> / Violin Phase</div>

<div id="audioplayer">
    <button id="pButton" class="pause" onclick="frozen();"></button>
    	<div id="timeline">
        <div id="playhead"></div>
    </div>
</div>



<div id="footer">
	<div id="fcontainer1" class="title" type="button" value="clickme" onclick="changeview1();">view 1</div>
	<div id="fcontainer2" class="title" type="button" value="clickme" onclick="changeview2();">view 2</div>
	<div id="fcontainer3" class="title" type="button" value="clickme" onclick="changeview3();">view 3</div>
	<div id="fcontainer4" class="title" type="button" value="clickme" onclick="changeview4();">view 4</div>
</div>


<script>
	var video = document.getElementById('video'); // id for audio element
	var duration = video.duration; // Duration of audio clip, calculated here for embedding purposes
	var pButton = document.getElementById('pButton'); // play button
	var playhead = document.getElementById('playhead'); // playhead
	var timeline = document.getElementById('timeline'); // timeline

	// timeline width adjusted for playhead
	var timelineWidth = timeline.offsetWidth - playhead.offsetWidth;

	// play button event listenter
	pButton.addEventListener("click", play);

	// timeupdate event listener
	video.addEventListener("timeupdate", timeUpdate, false);

	// makes timeline clickable
	timeline.addEventListener("click", function(event) {
	    moveplayhead(event);
	    video.currentTime = duration * clickPercent(event);
	}, false);

	// returns click as decimal (.77) of the total timelineWidth
	function clickPercent(event) {
	    return (event.clientX - getPosition(timeline)) / timelineWidth;
	}

	// makes playhead draggable
	playhead.addEventListener('mousedown', mouseDown, false);
	window.addEventListener('mouseup', mouseUp, false);

	// Boolean value so that audio position is updated only when the playhead is released
	var onplayhead = false;

	// mouseDown EventListener
	function mouseDown() {
	    onplayhead = true;
	    window.addEventListener('mousemove', moveplayhead, true);
	    video.removeEventListener('timeupdate', timeUpdate, false);
	}

	// mouseUp EventListener
	// getting input from all mouse clicks
	function mouseUp(event) {
	    if (onplayhead == true) {
	        moveplayhead(event);
	        window.removeEventListener('mousemove', moveplayhead, true);
	        // change current time
	        video.currentTime = duration * clickPercent(event);
	        video.addEventListener('timeupdate', timeUpdate, false);
	    }
	    onplayhead = false;
	}
	// mousemove EventListener
	// Moves playhead as user drags
	function moveplayhead(event) {
	    var newMargLeft = event.clientX - getPosition(timeline);

	    if (newMargLeft >= 0 && newMargLeft <= timelineWidth) {
	        playhead.style.marginLeft = newMargLeft + "px";
	    }
	    if (newMargLeft < 0) {
	        playhead.style.marginLeft = "0px";
	    }
	    if (newMargLeft > timelineWidth) {
	        playhead.style.marginLeft = timelineWidth + "px";
	    }
	}

	// timeUpdate
	// Synchronizes playhead position with current point in audio
	function timeUpdate() {
	    var playPercent = timelineWidth * (video.currentTime / duration);
	    playhead.style.marginLeft = playPercent + "px";
	    if (video.currentTime == duration) {
	        pButton.className = "";
	        pButton.className = "play";
	    }
	}

	//Play and Pause
	function play() {
	    // start video
	    if (video.paused) {
	        video.play();
	        // remove play, add pause
	        pButton.className = "";
	        pButton.className = "pause";
	    } else { // pause video
	        video.pause();
	        // remove pause, add play
	        pButton.className = "";
	        pButton.className = "play";
	    }
	}

	// Gets audio file duration
	video.addEventListener("canplaythrough", function() {
	    duration = video.duration;
	}, false);

	// getPosition
	// Returns elements left position relative to top-left of viewport
	function getPosition(el) {
	    return el.getBoundingClientRect().left;
	}

	function changeview1(){
		//window.alert("sometext");
		var video = document.getElementById('video');
		video.className = 'view1';
	}

	function changeview2(){
		//window.alert("sometext");
		var video = document.getElementById('video');
		video.className = 'view2';
	}

	function changeview3(){
		//window.alert("sometext");
		var video = document.getElementById('video');
		video.className = 'view3';
	}

	function changeview4(){
		//window.alert("sometext");
		var video = document.getElementById('video');
		video.className = 'view4';
	}

//	function frozen(){
//		var still = document.getElementById('still');
//		if (video.paused){still.style.display = 'none';}
//			else {still.style.display = 'block';}
//	}
	
	function frozen(){
		var still = document.getElementById('still');
		var N = 10;  // # of images
		var i = 1;
		var j;
		var piecelength = 254 / N;
		
		if (video.paused )
		{
			still.style.display = 'none';
		}
		else 
		{
/*			
			while (i < N)
			{
				if(video.currentTime  > piecelength * i ) 
				{
					i++;
				}
			} 
			j = i - 1;		
				
			document.getElementById('still').src = "atdk" + i + ".jpg";
*/		
			
			if(video.currentTime < 16)
			{
				still.style.display = 'block';
			}
			else if(video.currentTime < 19)
			{
				document.getElementById('still').src = "atdk_02.jpg";
			}
			else if(video.currentTime < 76)
			{
				document.getElementById('still').src = "atdk_03.jpg";
			}
			else if(video.currentTime < 114)
			{
				document.getElementById('still').src = "atdk_04.jpg";
			}
			else if(video.currentTime < 126)
			{
				document.getElementById('still').src = "atdk_05.jpg";
			}
			else if(video.currentTime < 132)
			{
				document.getElementById('still').src = "atdk_06.jpg";
			}
			else if(video.currentTime < 153)
			{
				document.getElementById('still').src = "atdk_07.jpg";
			}
			else if(video.currentTime < 160)
			{
				document.getElementById('still').src = "atdk_08.jpg";
			}
			else if(video.currentTime < 189)
			{
				document.getElementById('still').src = "atdk_09.jpg";
			}
			else if(video.currentTime < 191)
			{
				document.getElementById('still').src = "atdk_10.jpg";
			}
			else if(video.currentTime < 252)
			{
				document.getElementById('still').src = "atdk_13.jpg";
			}
			else if(video.currentTime < 256)
			{
				document.getElementById('still').src = "atdk_14.jpg";
			}
			else if(video.currentTime < 257)
			{
				document.getElementById('still').src = "atdk_11.jpg";
			}
			else if(video.currentTime < 259)
			{
				document.getElementById('still').src = "atdk_12.jpg";
			}
			else if(video.currentTime < 269)
			{
				document.getElementById('still').src = "atdk_15.jpg";
			}
			else if(video.currentTime < 271)
			{
				document.getElementById('still').src = "atdk_17.jpg";
			}
			else if(video.currentTime < 273)
			{
				document.getElementById('still').src = "atdk_16.jpg";
			}
			else if(video.currentTime < 335)
			{
				document.getElementById('still').src = "atdk_18.jpg";
			}
			else if(video.currentTime < 397)
			{
				document.getElementById('still').src = "atdk_19.jpg";
			}
			else 
			{
				document.getElementById('still').src = "atdk_20.jpg";
			}

			still.style.display = 'block';
			
		}
	}


	// var path = document.querySelector('.path');
	// var length = path.getTotalLength();


	// $('#fcontainer1').on("click", (function(){
 //    // var vid = $('video');
 //    //     vid.attr('class','view1');
 //        alert(1);
	// }));

</script>
</body>
</html>
